What about HA(High Availability)?

1. 对软硬件的冗余，以**消除单点故障**。任何系统都会有一个或多个冗余系统做standby
2. 对故障的检测和恢复。**检测故障以及用备份的结点接管故障点**。这也就是failover
3. 需要**很可靠的交汇点**（CrossOver）。这是一些不容易冗余的结点，比如域名解析，负载均衡器等。



**冗余结点**最大的难题就是对于有状态的结点的数据复制和数据一致性的保证（无状态结点的冗余相对比较简单）。冗余数据所带来的一致性问题是魔鬼中的魔鬼



- 如果系统的数据镜像到冗余结点是异步的，那么在failover的时候就会出现数据差异的情况。


- 如果系统在数据镜像到冗余结点是同步的，那么就会导致冗余结点越多性能越慢。

所以，很多高可用系统都是在做各种取舍，这需要比对着业务的特点来的，**比如银行账号的余额是一个状态型的数据，那么，冗余时就必需做到强一致性**，再比如说，订单记录属于追加性的数据，那么在failover的时候，就可以到备机上进行追加，这样就比较简单了（阿里目前所谓的异地双活其实根本做不到状态型数据的双活）。

## 总结

- 要做到数据不丢，就必需要持久化
- 要做到服务高可用，就必需要有备用（复本），无论是应用结点还是数据结点
- 要做到复制，就会有数据一致性的问题。
- 我们不可能做到100%的高可用，也就是说，我们能做到几个9个的SLA。